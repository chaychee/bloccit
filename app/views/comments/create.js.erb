<% if @comment.valid? %>
  $('.new-comment').html("<%= escape_javascript(render partial: 'comments/form', locals: { post: @post, comment: @new_comment }) %>");
  $data = $("<%= escape_javascript(render(@comment)) %>").hide();
  $('.js-comments').prepend($data);
  $('#comment-' + <%= @comment.id %>).slideDown();
<% else %>
  $('.new-comment').html("<%= escape_javascript(render partial: 'comments/form', locals: { post: @post, comment: @comment }) %>");
<% end %>